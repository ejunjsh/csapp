# csapp(e3)
my csapp(e3) homework

ref https://github.com/DreamAndDead/CSAPP-3e-Solutions

# summary

## è®¡ç®—æœºç³»ç»Ÿæ¼«æ¸¸

> è¿™ä¸€ç« é‡Œé¢åŸºæœ¬æ˜¯å¯¹æ•´æœ¬ä¹¦çš„ä¸€ä¸ªæ¦‚æ‹¬å§ã€‚

* gcc ç¿»è¯‘æºç çš„çš„å››ä¸ªé˜¶æ®µï¼šé¢„å¤„ç†ï¼Œç¼–è¯‘ï¼Œæ±‡ç¼–ï¼Œé“¾æŽ¥
* ç³»ç»Ÿç¡¬ä»¶ç»„æˆï¼šæ€»çº¿ï¼ŒI/Oè®¾å¤‡ï¼Œä¸»å­˜ï¼Œå¤„ç†å™¨
* å­˜å‚¨è®¾å¤‡çš„å±‚æ¬¡ç»“æž„ï¼šL0(å¯„å­˜å™¨)ï¼ŒL1,L2,L3(SRAM),L4(ä¸»å­˜DRAM),L5(ç£ç›˜),L6(...)
* å¹¶å‘è¿è¡Œåˆ™æ˜¯è¯´ä¸€ä¸ªè¿›ç¨‹çš„æŒ‡ä»¤å’Œå¦ä¸€ä¸ªè¿›ç¨‹çš„æŒ‡ä»¤äº¤é”™æ‰§è¡Œçš„
* æ— è®ºæ˜¯åœ¨å•æ ¸è¿˜æ˜¯å¤šæ ¸ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªCPUçœ‹ä¸ŠåŽ»éƒ½åƒæ˜¯åœ¨å¹¶å‘åœ°æ‰§è¡Œå¤šä¸ªè¿›ç¨‹ï¼Œè¿™æ˜¯é€šè¿‡å¤„ç†å™¨åœ¨è¿›ç¨‹é—´åˆ‡æ¢æ¥å®žçŽ°çš„ã€‚
* æ“ä½œç³»ç»Ÿå®žçŽ°è¿™ç§äº¤é”™æ‰§è¡Œçš„æœºåˆ¶ç§°ä¸ºä¸Šä¸‹æ–‡åˆ‡æ¢
* è™šæ‹Ÿå†…å­˜æ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œå®ƒä¸ºæ¯ä¸ªè¿›ç¨‹æä¾›ä¸€ä¸ªå‡è±¡ï¼Œå³æ¯ä¸ªè¿›ç¨‹éƒ½æ˜¯ç‹¬å åœ°ä½¿ç”¨ä¸»å­˜ã€‚æ¯ä¸ªè¿›ç¨‹çœ‹åˆ°çš„å†…å­˜éƒ½æ˜¯ä¸€è‡´çš„ï¼Œç§°ä¸ºè™šæ‹Ÿå†…å­˜ç©ºé—´
* æ¯æ¬¡æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæ ˆå°±ä¼šå¢žé•¿ï¼›ä»Žä¸€ä¸ªå‡½æ•°è¿”å›žæ—¶ï¼Œæ ˆå°±ä¼šæ”¶ç¼©
* ä¸€ä¸ªè¿›ç¨‹å®žé™…ä¸Šå¯ä»¥ç”±å¤šä¸ªç§°ä¸ºçº¿ç¨‹çš„æ‰§è¡Œå•ä½ç»„æˆï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½è¿è¡Œåœ¨è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå¹¶å…±äº«åŒæ ·çš„ä»£ç å’Œå…¨å±€æ•°æ®ã€‚
* è¶…çº¿ç¨‹æ˜¯ä¸€é¡¹å…è®¸ä¸€ä¸ªcpuæ‰§è¡Œå¤šä¸ªæŽ§åˆ¶æµçš„æŠ€æœ¯
* åˆ©ç”¨ç›´æŽ¥å­˜å‚¨å™¨å­˜å–ï¼ˆDMAï¼‰æŠ€æœ¯ï¼Œæ•°æ®å¯ä»¥ä¸é€šè¿‡å¤„ç†å™¨è€Œç›´æŽ¥ä»Žç£ç›˜åˆ°è¾¾ä¸»å­˜ã€‚


## ä¿¡æ¯çš„è¡¨ç¤ºå’Œå¤„ç†

* å¤§å¤šæ•°è®¡ç®—æœºä½¿ç”¨8ä½çš„å—ï¼Œæˆ–è€…å­—èŠ‚ï¼ˆbyteï¼‰,ä½œä¸ºæœ€å°çš„å¯å¯»å€çš„å†…å­˜å•ä½ï¼Œè€Œä¸æ˜¯è®¿é—®å†…å­˜ä¸­å•ç‹¬çš„ä½ã€‚æœºå™¨çº§ç¨‹åºå°†å†…å­˜è§†ä¸ºä¸€ä¸ªéžå¸¸å¤§çš„å­—èŠ‚æ•°ç»„ï¼Œæˆä¸ºè™šæ‹Ÿå†…å­˜ã€‚å†…å­˜çš„æ¯ä¸ªå­—èŠ‚éƒ½ç”±ä¸€ä¸ªå”¯ä¸€çš„æ•°å­—æ¥è¡¨è¯†ï¼Œç§°ä¸ºå®ƒçš„åœ°å€ï¼Œæ‰€æœ‰å¯èƒ½çš„åœ°å€çš„é›†åˆå°±ç§°ä¸ºè™šæ‹Ÿå†…å­˜ç©ºé—´
* cçš„æŒ‡é’ˆåŒ…å«å€¼å’Œç±»åž‹ï¼Œå®ƒçš„å€¼è¡¨ç¤ºæŸä¸ªå¯¹è±¡çš„ä½ç½®ï¼Œå®ƒçš„ç±»åž‹è¡¨ç¤ºé‚£ä¸ªä½ç½®ä¸Šæ‰€å­˜å‚¨å¯¹è±¡çš„ç±»åž‹
* å¯¹äºŽä¸€ä¸ªå­—é•¿ä¸ºwä½çš„æœºå™¨ï¼Œè™šæ‹Ÿåœ°å€èŒƒå›´ä¸º0ï½ž2^w-1,ç¨‹åºæœ€å¤šè®¿é—®2^wä¸ªå­—èŠ‚
* æœ€ä½Žæœ‰æ•ˆå­—èŠ‚åœ¨æœ€å‰é¢çš„æ–¹å¼ï¼Œç§°ä¸ºå°ç«¯æ³•ï¼Œæœ€é«˜æœ‰æ•ˆå­—èŠ‚åœ¨æœ€å‰é¢çš„æ–¹å¼ï¼Œç§°ä¸ºå¤§ç«¯æ³•ã€‚
* æœ€å¸¸è§çš„æœ‰ç¬¦å·æ•°çš„è®¡ç®—æœºè¡¨ç¤ºæ–¹å¼å°±æ˜¯è¡¥ç 
* å‡ ä¹Žæ‰€æœ‰çš„ç¼–è¯‘å™¨/æœºå™¨ç»„åˆéƒ½å¯¹æœ‰ç¬¦å·æ•°ä½¿ç”¨ç®—æ•°å³ç§»
* å¯¹äºŽå¤§å¤šæ•°cè¯­è¨€çš„å®žçŽ°ï¼Œå¤„ç†åŒæ ·å­—é•¿çš„æœ‰ç¬¦å·æ•°å’Œæ— ç¬¦å·æ•°ä¹‹é—´ç›¸äº’è½¬æ¢çš„ä¸€èˆ¬è§„åˆ™æ˜¯ï¼šæ•°å€¼å¯èƒ½ä¼šæ”¹å˜ï¼Œä½†æ˜¯ä½æ¨¡å¼ä¸å˜
* ä¸¤ä¸ªæ•°çš„wä½è¡¥ç ä¹‹å’Œä¸Žæ— ç¬¦å·ä¹‹å’Œæœ‰å®Œå…¨ç›¸åŒçš„ä½çº§è¡¨ç¤ºï¼Œä¹˜æ³•ä¹Ÿä¸€æ ·

## ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º

> è¿™ç¯‡æ˜¯æ±‡ç¼–ç›¸å…³ï¼Œç²¾åŽðŸ‘¿

* æ±‡ç¼–ä»£ç æ˜¯æœºå™¨ä»£ç çš„æ–‡æœ¬è¡¨ç¤º
* ç›®æ ‡ä»£ç æ˜¯æœºå™¨ä»£ç çš„ä¸€ç§å½¢å¼ï¼Œå®ƒåŒ…å«æ‰€æœ‰æŒ‡ä»¤çš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å¡«å…¥å…¨å±€å€¼çš„åœ°å€ã€‚
* x86-64çš„è™šæ‹Ÿåœ°å€æ˜¯ç”±64ä½çš„å­—æ¥è¡¨ç¤ºçš„ï¼Œç›®å‰çš„å®žçŽ°ä¸­ï¼Œé«˜16ä½éƒ½å¿…é¡»è®¾ç½®ä¸º0ï¼Œæ‰€ä»¥ä¸€ä¸ªåœ°å€å®žé™…ä¸Šèƒ½å¤ŸæŒ‡å®šçš„æ˜¯2^48æˆ–è€…64TBèŒƒå›´å†…çš„ä¸€ä¸ªå­—èŠ‚ã€‚
* ä¼ é€æŒ‡ä»¤çš„ä¸¤ä¸ªæ“ä½œæ•°ä¸èƒ½éƒ½æŒ‡å‘å†…å­˜ä½ç½®
* ç”±äºŽæ˜¯ä»Ž16ä½ä½“ç³»ç»“æž„æ‰©å±•æˆ32ä½çš„ï¼ŒIntelç”¨æœ¯è¯­â€œå­—(word)â€è¡¨ç¤º16ä½æ•°æ®ç±»åž‹ã€‚å› æ­¤ï¼Œ32ä½æ•°ä¸ºâ€œåŒå­—(double words)â€ï¼Œ64ä½æ•°ä¸ºâ€œå››å­—(quad words)â€
* å‡½æ•°é€šè¿‡æŠŠå€¼å­˜å‚¨åœ¨å¯„å­˜å™¨%raxæˆ–å¯„å­˜å™¨çš„æŸä¸ªä½Žä½éƒ¨åˆ†ä¸­è¿”å›ž
* æ ˆå‘ä¸‹å¢žé•¿ï¼Œæ ˆé¡¶å…ƒç´ çš„åœ°å€æ˜¯æ‰€æœ‰æ ˆä¸­å…ƒç´ åœ°å€ä¸­æœ€ä½Žçš„ï¼Œæ ˆæŒ‡é’ˆ%rspä¿å­˜ç€æ ˆé¡¶å…ƒç´ çš„åœ°å€ã€‚
* è·³è½¬æŒ‡ä»¤æœ‰å‡ ç§ä¸åŒçš„ç¼–ç ï¼Œä½†æ˜¯æœ€å¸¸ç”¨éƒ½æ˜¯PCç›¸å¯¹çš„(PC-relative)
* å°†æ ˆæŒ‡é’ˆå‡å°‘ä¸€ä¸ªé€‚å½“çš„é‡å¯ä»¥ä¸ºæ²¡æœ‰æŒ‡å®šåˆå§‹å€¼çš„æ•°æ®åœ¨æ ˆä¸Šåˆ†é…ç©ºé—´ã€‚ç±»ä¼¼çš„ï¼Œå¯ä»¥é€šè¿‡å¢žåŠ æ ˆæŒ‡é’ˆæ¥é‡Šæ”¾ç©ºé—´
* å½“x86-64è¿‡ç¨‹éœ€è¦çš„å­˜å‚¨ç©ºé—´è¶…å‡ºå¯„å­˜å™¨èƒ½å¤Ÿå­˜æ”¾çš„å¤§å°æ—¶ï¼Œå°±ä¼šåœ¨æ ˆä¸Šåˆ†é…ç©ºé—´ã€‚è¿™ä¸ªéƒ¨åˆ†æˆä¸ºè¿‡ç¨‹çš„æ ˆå¸§(stack frame)
* å¯ä»¥é€šè¿‡å¯„å­˜å™¨æœ€å¤šä¼ é€’6ä¸ªæ•´åž‹ï¼ˆä¾‹å¦‚æ•´æ•°å’ŒæŒ‡é’ˆï¼‰çš„å‚æ•°ï¼Œè¶…å‡º6ä¸ªçš„éƒ¨åˆ†å°±è¦é€šè¿‡æ ˆæ¥ä¼ é€’
* æ ¹æ®æƒ¯ä¾‹ï¼Œå¯„å­˜å™¨%rbx,%rbpå’Œ%r12ï½ž%r15è¢«åˆ’åˆ†ä¸ºè¢«è°ƒç”¨è€…ä¿å­˜å¯„å­˜å™¨
* æ‰€æœ‰å…¶ä»–çš„å¯„å­˜å™¨ï¼Œé™¤äº†æ ˆæŒ‡é’ˆ%rsp,éƒ½åˆ†ç±»ä¸ºè°ƒç”¨è€…ä¿å­˜å¯„å­˜å™¨
* æ•°ç»„å…ƒç´ åœ¨å†…å­˜ä¸­æŒ‰ç…§â€œè¡Œä¼˜å…ˆâ€çš„é¡ºåºæŽ’åˆ—
* ä¸€ä¸ªè”åˆçš„æ€»å¤§å°ç­‰äºŽå®ƒæœ€å¤§å­—æ®µçš„å¤§å°
* å¯¹é½åŽŸåˆ™æ˜¯ä»»ä½•kå­—èŠ‚çš„åŸºæœ¬å¯¹è±¡çš„åœ°å€å¿…é¡»æ˜¯kçš„å€æ•°
* å°†æŒ‡é’ˆä»Žä¸€ç§ç±»åž‹å¼ºåˆ¶è½¬æ¢æˆå¦ä¸€ç§ç±»åž‹ï¼Œåªæ”¹å˜å®ƒçš„ç±»åž‹ï¼Œè€Œä¸æ”¹å˜å®ƒçš„å€¼ï¼ŒæŒ‡é’ˆä¹Ÿå¯ä»¥æŒ‡å‘å‡½æ•°
* ä¸ºäº†ç®¡ç†å˜é•¿æ ˆå¸§ï¼Œx86-64ä»£ç ä½¿ç”¨å¯„å­˜å™¨%rbpä½œä¸ºå¸§æŒ‡é’ˆï¼ˆæœ‰æ—¶å€™ç§°ä¸ºåŸºæŒ‡é’ˆï¼‰

## 

> to be continue....