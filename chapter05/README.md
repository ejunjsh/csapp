# chapter05

## precondition
````shell
mkdir bin
````

## 5.13
A.

     +----+----+----+----+-----+-----+
     |%rbp|%rcx|%rax|%rbx|%xmm1|%xmm0|
     +----+----+----+----+-----+-----++----+
       +----|----|----|----------|--->|    |
       |    +----|----|----------|--->|load|      vmovad 0(%rbp,%rcx,8),%xmm1
       |    |    |    |    +-----|----|    |
       |    |    |    |    |     |    +----+
       |    +----|----|----------|--->|    |
       |    |    |    |    |     |    |load|---+
       |    |    +----|----------|--->|    |   |
       |    |    |    |    |     |    +----+   |  vmulsd (%rax,%rcx,8),%xmm1,%xmm0
       |    |    |    |    |     |    |    |<--+
       |    |    |    |    +-----|--->|mul |
       |    |    |    |    +-----|----|    |
       |    |    |    |    |     |    +----+
       |    |    |    |    +-----|--->|    |
       |    |    |    |    |     +--->|add |      vaddsd %xmm1,%xmm0,%xmm0
       |    |    |    |    |     +----|    |
       |    |    |    |    |     |    +----+
       |    +----|----|----------|--->|    |
       |         |    |    |     |    |add |      addq $1, %rcx
       |    +----|----|----------|----|    |
       |    |    |    |    |     |    +----+
       |    +----|----|----------|--->|    |
       |    |    |    |    |     |    |cmp |---+  cmpq %rbx, %rcx
       |    |    |    +----|-----|--->|    |   |
       |    |    |    |    |     |    +----+   |
       |    |    |    |    |     |    |    |   |
       |    |    |    |    |     |    |jne |<--+  jne .L15
       |    |    |    |    |     |    |    |
       |    |    |    |    |     |    +----+
       v    v    v    v    v     v
     +----+----+----+----+-----+-----+
     |%rbp|%rcx|%rax|%rbx|%xmm1|%xmm0|
     +----+----+----+----+-----+-----+



          +----+                      +-----+
          |%rcx|                      |%xmm0|
          +----+                      +-----+
            |                           |
            |     +----+                |  <--------- key path
            +---->|load|------+         |
            |     +----+      |         |
            |                 v         v
            |     +----+    +-+--+    +-+--+
            +---->|load|--->|mul |--->|add |
            |     +----+    +----+    +----+
            |                           |
            |                           |
            v                           |
          +----+                        |
          |add |                        |
          +----+                        |
            |                           |
            v                           v
          +-+--+                      +-----+
          |%rcx|                      |%xmm0|
          +----+                      +-----+

B.

    float add on key path, so CPE is 3.0

C.

    long add on key path, so CPE is 1.0

D.

    float multiply is not on the key path, only float add on key path

compile

    gcc src/5.13.c src/vec.c -o bin/5.13

run 

    bin/5.13
